# =======================================
# Calculate pi using Nilakantha series
# See http://www.wikihow.com/Calculate-Pi
# =======================================

@prefix math: <http://www.w3.org/2000/10/swap/math#>.
@prefix : <https://eyereasoner.github.io/eye/reasoning#>.

{ (?N ?Pi) :pi true } <= {
    (1 ?N 0 ?P 1) :pi true.
    (4 ?P) math:product ?A.
    (3 ?A) math:sum ?Pi.
}.

{ (?N ?N ?P ?P ?S) :pi true } <= true.

{ (?K ?N ?P0 ?P ?S) :pi true } <= {
    ?K math:notEqualTo ?N.
    (?K 1) math:sum ?K1.
    (2 ?K) math:product ?K2.
    (?K2 1) math:sum ?Z1.
    (?K2 2) math:sum ?Z2.
    (?K2 ?Z1 ?Z2) math:product ?Z3.
    (?S ?Z3) math:quotient ?Z4.
    (?P0 ?Z4) math:sum ?P1.
    ?S math:negation ?S1.
    (?K1 ?N ?P1 ?P ?S1) :pi true.
}.

# test
{ (100 ?Pi) :pi true } => { (100 ?Pi) :pi true }.
